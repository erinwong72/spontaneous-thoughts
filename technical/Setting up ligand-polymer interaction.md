# Setting up ligand-polymer interaction
Most of the stuff is from here: 
- First step is based off: [Protein-Ligand Complex](http://www.mdtutorials.com/gmx/complex/02_topology.html)
- [Building Biphasic Systems](http://www.mdtutorials.com/gmx/biphasic/01_genconf.html)

1. **Prepare** topologies for your monomer/polymer (notably not in the tutorial üíÄ)
	- If given a .pdb file of the polymer that isn‚Äôt compatible with the [[pdb2gmx function]]:
		1. Find out what the ‚Äúresidue‚Äù name is
		2. Use UCSF Chimera to select just one residue ‚Üí that is your ‚Äúmonomer‚Äù
			1. Click ==Tools ‚Üí Structure Editing ‚Üí AddH== to ensure no funny business happens with carbocations/anions/radicals etc.
			2. Write out a .mol2 file
			3. Remember to change the molecule name in the .mol2 file to remove the ‚Äú.pdb‚Äù ending
		4. Upload .mol2 file to [CGenFF](https://cgenff.umaryland.edu/initguess/) and download .str file that results
		5. Using the [cgenff_charmm2gmx_py3_nx2.py](https://www.charmm.org/archive/charmm/resources/charmm-force-fields/)file (scroll to the heading CHARMM36 Files for GROMACS and download the script)
			- Use Python 3.9, Numpy 1.20
			- ```python
			  python cgenff_charmm2gmx_py3_nx2.py MONOMER MONOMER.mol2 MONOMER.str charmm36-jul2022.ff/
			  ```
			  - Replace MONOMER with your monomer
			- Run once to get the fractions error, then edit the script that‚Äôs causing the error, replacing fractions with math ‚Üí `from math import gcd`
		1. Go back into the polymer‚Äôs .pdb file and find the number of ‚Äúmonomers‚Äù used to build the polymer
			- ![[Pasted image 20230730182521.png|400]]
				- Scroll all the way down and look at the number in the column that is highlighted
		2. Go to the topology file generated by the python script and change ‚Äú#mols‚Äù in the molecules section to the number you just got
2. **Measure** the dimensions of the box that the polymer will be put in, making it big enough to fit the protein AND the polymer:
	1. Open VMD
	2. Load the polymer
	3. Click ==Extensions ‚Üí Visualization ‚Üí Ruler== and enable grid mode, taking note of the units of measurement in the lower left corner
	4. Click ==Mouse ‚Üí Label ‚Üí Bond== to start measuring
		1. Click on one residue at the bottom (measuring height) and then one at the top
		2. Note the distance, which will label the white line that connects the two residues
		3. Do for all dimensions, making sure to identify in which axis you‚Äôre measuring (x, y, z)
	5. Do the same steps for the protein:
		1. If you know that the protein is *definitely* smaller (x and z axis-wise), don‚Äôt bother measuring them
		2. Measure y axis length and add to the value you got for the polymer
			- ![[Screenshot 2023-07-30 at 5.16.20 PM.png|400]]
	6. Convert the lengths that you got into nanometers (10 angstroms ‚Üí 1 nm)
3. Build the box
``` bash
gmx insert-molecules -ci POLYMER.pdb -nmol 1 -box x y z POLYMER_box.gro
```
- Replace POLYMER with your polymer
- nmol = number of molecules
- x, y, z = lengths that you got eariler